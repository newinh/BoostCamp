# Closure

- Overview
    - í´ë¡œì €ë€?
    - í´ë¡œì €ì™€ í•¨ìˆ˜ì˜ ê´€ê³„
    - í´ë¡œì €ë§Œì˜ ê¸°ëŠ¥
- Expression
    - ê¸°ë³¸ í´ë¡œì € ë¬¸ë²•
    - ê¸°ë³¸ì˜ˆì œ
    - ê¸°ë³¸ í‘œí˜„ & í•¨ìˆ˜ ì´ìš©
    - íƒ€ì… ìœ ì¶” (Inferring Type From Context)
    - ë‹¨ì¶• ì¸ì ì´ë¦„ (Shorthand Argument Names)
    - ì•”ì‹œì  ë°˜í™˜í‘œí˜„ (Implicit Returns from Single-Expression Closures
    - ì—°ì‚°ì í•¨ìˆ˜ (Operator Methods)
    - í›„í–‰ í´ë¡œì € (Trailling Closures)

- ê°’ íšë“ (Capture)
- í´ë¡œì €ëŠ” ì°¸ì¡°íƒ€ì…
- íšë“ëª©ë¡
    - ì°¸ì¡°íƒ€ì…ì˜ íšë“ëª©ë¡
    - í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹° ë¡œì„œì˜ í´ë¡œì €
- íƒˆì¶œ í´ë¡œì € (Escape)
- Auto Closure



## Overview

 ìŠ¤ìœ„í”„íŠ¸ì—ì„œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì„ ì ‘í•  ë•Œ ì²« ê±¸ìŒìœ¼ë¡œ ê¼­ ì•Œì•„í– í•  ë…€ì„ì´ ë°”ë¡œ **í´ë¡œì €(Closure)**ì´ë‹¤.  

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ì¤‘ìš”í•œ íŠ¹ì§•ì¤‘ í•˜ë‚˜ëŠ” í•¨ìˆ˜ë¥¼ [**ì¼ê¸‰ ê°ì²´ (First-class Citizen)**](./https://ko.wikipedia.org/wiki/ì¼ê¸‰_ê°ì²´)ë¡œ ë‹¤ë£¬ë‹¤ëŠ” ì ì´ë‹¤. ì¼ê¸‰ ê°ì²´ì˜ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- ì „ë‹¬ì¸ìë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- ë™ì  í”„ë¡œí¼í‹° í• ë‹¹ì´ ê°€ëŠ¥í•˜ë‹¤.
- ë³€ìˆ˜ë‚˜ ë°ì´í„° êµ¬ì¡° ì•ˆì— ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë°˜í™˜ ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í• ë‹¹í•  ë•Œ ì‚¬ìš©ëœ ì´ë¦„ê³¼ ê´€ê³„ì—†ì´ ê³ ìœ í•œ ê°ì²´ë¡œ êµ¬ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•¨ìˆ˜(ë™ì‘)ë¥¼ ì „ë‹¬ì¸ìë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , ë³€ìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. ë‚´ê°€ ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ë£¨ëŠ” ê°ì²´ì²˜ëŸ¼ ë‹¤ë£¨ ìˆ˜ ìˆë‹¤..! ì •ë„ë¡œ í•´ì„í•  ìˆ˜ ìˆê² ë‹¹ã…‡ã…‡. ì´ ì ì„ ì§šê³  í´ë¡œì €ë¡œ ë„˜ì–´ê°€ë³´ì.


#### í´ë¡œì €ë€?
- *Closures* are self-contained blocks of functionality that can be passed around and used in your code.
- ì¼ì •ê¸°ëŠ¥ì„ í•˜ëŠ” ì½”ë“œë¥¼ í•˜ë‚˜ì˜ ë¸”ë¡ìœ¼ë¡œ ëª¨ì•„ ë†“ì€ ê²ƒ.
- ì¤‘ê´„í˜¸ `{ }` ë¡œ ê°ì‹¸ì§„ ì‹¤í–‰ê°€ëŠ¥í•œ ì½”ë“œ ë¸”ëŸ­

#### í´ë¡œì €ì™€ í•¨ìˆ˜ì˜ ê´€ê³„
í•¨ìˆ˜ëŠ” í´ë¡œì €ì˜ í•œ í˜•íƒœ!   
í´ë¡œì €ë„ `() -> Void` ê¼´ì˜ íƒ€ì…ì„ ê°–ëŠ”ë‹¤.
ì•„ë˜ëŠ” í´ë¡œì €ì˜ 3ê°€ì§€ ëª¨ì–‘ì¸ë° í•¨ìˆ˜ëŠ” ê·¸ ì¤‘ í•˜ë‚˜ì˜ ëª¨ìŠµì— ì†í•œë‹¤.

- ì´ë¦„ì„ ê°€ì§€ë©´ì„œ ì–´ë–¤ ê°’ë„ íšë“í•˜ì§€ ì•ŠëŠ” ì „ì—­í•¨ìˆ˜ì˜ í˜•íƒœ
- ì´ë¦„ì„ ê°€ì§€ë©´ì„œ ë‹¤ë¥¸ í•¨ìˆ˜ ë‚´ë¶€ì˜ ê°’ì„ íšë“í•  ìˆ˜ ìˆëŠ” ì¤‘ì²©ëœ í•¨ìˆ˜ì˜ í˜•íƒœ
- ì´ë¦„ì´ ì—†ê³  ì£¼ë³€ ë¬¸ë§¥ì— ë”°ë¼ ê°’ì„ íšë“í•  ìˆ˜ ìˆëŠ” ì¶•ì–‘ ë¬¸ë²•ìœ¼ë¡œ ì‘ì„±ëœ í˜•íƒœ

#### í´ë¡œì €ë§Œì˜ ì¤‘ìš”í•œ ê¸°ëŠ¥.   
*í´ë¡œì €*ëŠ” ë³€ìˆ˜ë‚˜ ìƒìˆ˜ê°€ ì„ ì–¸ëœ ìœ„ì¹˜ì—ì„œ **ì°¸ì¡°ë¥¼ íšë“**í•˜ê³  ì €ì¥í•  ìˆ˜ ìˆë‹¤.  
í´ë¡œì €ëŠ” ì—¬ê¸°ì„œ ì°©ì•ˆí•œ ì´ë¦„ì´ë€ë‹¤.(ì ê¸ˆ!)
![prisoner-jail](./prisoner-jail.jpg)


## Expression
ë§¤ìš°...ë§¤ìš°ë§¤ìš° ë‹¤ì–‘í•œ í‘œí˜„ë°©ë²•ì´ ìˆë‹¤! ì¶•ì•½í˜•ì´ ë§ê¸° ë•Œë¬¸ì¸ë“¯ã…‡ã…‡

#### ê¸°ë³¸ í´ë¡œì € ë¬¸ë²•

```swift
{
    (ë§¤ê°œë³€ìˆ˜ë“¤) -> ë°˜í™˜íƒ€ì… in
ê·¹   ì‹¤í–‰ ì½”ë“œ
}
```

ë°˜í™˜ê°’ì´ ìˆë‹¤ë©´, return êµ¬ë¬¸ë„ ë“¤ì–´ìˆê² ì§€. í´ë¡œì €ë„ í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ *ì…ì¶œë ¥ ë§¤ê°œë³€ìˆ˜*ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤(`inout`í‚¤ì›Œë“œë‘ `&`ê¸°í˜¸ ë¶™ì´ëŠ”ê±°). ê·¸ëŸ¬ë‚˜ *ë§¤ê°œë³€ìˆ˜ ê¸°ë³¸ê°’*ì„ ì¤„ ìˆ˜ëŠ” ì—†ë‹¤. ê·¸ë ‡ë‹¤. 

#### ê¸°ë³¸ ì˜ˆì œ
ì•„ë˜ ì˜ˆì œë¥¼ ì´ìš©í•´ì„œ í‘œí˜„ë²•ì„ ì•Œì•„ë³¼ê±°ì„
```swift
let names = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]
var reversedNames = names.sorted(by: (String, String) -> Bool)

// Declare
public func sorted(by areInIncreasingOrder: (Element, Element) -> Bool) -> [Element]
```

ë°°ì—´ì˜ *sorted ë©”ì„œë“œ*ë¥¼ ì´ìš©í•´ì„œ *í´ë¡œì €*ì˜ í‘œí˜„ë°©ë²•ì„ ì•Œì•„ë³¼ê±°ì„. `names`ëŠ” `String`ë°°ì—´ì´ê³  ì—¬ê¸°ì„œ *sorted ë©”ì„œë“œ*ëŠ” *í´ë¡œì €*ë¥¼ ì „ë‹¬ë°›ê²Œë˜. 
ë°”ë¡œ `String` 2ê°œë¥¼ ë°›ì•„ì„œ `Bool`ì„ ë°˜í™˜í•˜ëŠ” *í´ë¡œì €*ë¥¼!  
ê·¸ëŸ¬ë©´ *sorted ë©”ì„œë“œ*ëŠ” ì •ë ¬ëœ `String` ë°°ì—´ì„ ë°˜í™˜í•˜ì§€.  

#### ê¸°ë³¸ í‘œí˜„ & í•¨ìˆ˜ ì´ìš©



```swift
// í•œì¤„ë¡œ ì¨ë„ ìƒê´€ ì—†ë‹¤.
var reversedNames = names.sorted(by: { 
    (s1: String, s2: String) -> Bool in
    return s1 > s2
})

// Stringí˜• 2ê°œë¥¼ ë°›ì•„ì„œ Boolí˜•ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
func backward(_ s1: String, _ s2: String) -> Bool {
    return s1 > s2
}
var reversedNames = names.sorted(by: backward)

// ["Ewa", "Daniella", "Chris", "Barry", "Alex"]
```

#### íƒ€ì… ìœ ì¶” (Inferring Type From Context)
*sorted ë©”ì„œë“œ*ëŠ” `(String, String) -> Bool`ì„ ì›í•˜ë¯€ë¡œ  
ì»´íŒŒì¼ëŸ¬ëŠ” ì´ë¯¸ ëª¨ë“ ê²ƒì„ ì•Œê³ ìˆë‹¤...`String`ì´ ë“¤ì–´ì˜¤ê³  `Bool`í˜•ì´ ë‚˜ê°ˆê²ƒì„ì„!

```swift
reversedNames = names.sorted(by: { (s1, s2) in return s1 > s2 } )
```

#### ë‹¨ì¶• ì¸ì ì´ë¦„ (Shorthand Argument Names)
ë°ì´í„° íƒ€ì…ì´ ì—†ì–´ì§€ë‹ˆ `s1`, `s2`ê°™ì€ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ë„ í•„ìš”ê°€ ì—†ë‹¤. ê·¸ë˜ì„œ í•œë‹¤ ì œê³µ, ìŠ¤ìœ„í”„íŠ¸ëŠ” ë‹¨ì¶•ì¸ìì´ë¦„ì„!ğŸ˜   
ë‹¨ì¶• ì¸ìì´ë¦„ì€ ì²« ë²ˆì§¸ ì „ë‹¬ì¸ìë¶€í„° `$0`, `$1`, `$2`,... ìˆœì„œì´ë‹¤.

```swift
// ì´ê±´ ì—ëŸ¬ 
reversedNames = names.sorted(by: { () in return $0 > $1 } )

reversedNames = names.sorted(by: { return $0 > $1 } )
```

#### ì•”ì‹œì  ë°˜í™˜í‘œí˜„ (Implicit Returns from Single-Expression Closures
 í´ë¡œì € ì‹¤í–‰ë¬¸ì´ **ë‹¨ í•œì¤„**ì´ë©´ ì•”ì‹œì ìœ¼ë¡œ ê·¸ ì‹¤í–‰ë¬¸ì´ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
```swift
reversedNames = names.sorted(by: { $0 > $1 } )
```

#### ì—°ì‚°ì í•¨ìˆ˜ (Operator Methods)

ì—°ì‚°ìë„ í•¨ìˆ˜ì˜ ì¼ì¢…ì´ì—ˆëŠ”ë° ìš°ë¦¬ê°€ ì§€ê¸ˆê¹Œì§€ *sorted(by: ) ë©”ì„œë“œ*ì— ì „ë‹¬í•œ í´ë¡œì €ì™€ ê°™ì€ íƒ€ì…ì´ë‹¤.  
ê·¸ë˜ì„œ!

```swift
reversedNames = names.sorted(by: > )

// Declare
public func ><T : Comparable>(lhs: T, rhs: T) -> Bool
```


#### í›„í–‰ í´ë¡œì € (Trailling Closures)
ë§ˆì§€ë§‰ ì „ë‹¬ì¸ìë¡œ ìœ„ì¹˜í•˜ëŠ” í•¨ìˆ˜ì˜ ì†Œê´„í˜¸`( )`ë¥¼ ë‹«ê³  í´ë¡œì €ë¥¼ ì‘ì„±í•´ë„ ëœë‹¤. ê²Œë‹¤ê°€ **ë‹¨ í•˜ë‚˜**ì˜ í´ë¡œì €ë§Œ ì „ë‹¬ì¸ìë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” **ì†Œê´„í˜¸ë„ ìƒëµí•  ìˆ˜ ìˆë‹¤.** WoW

```swift
reversedNames = names.sorted{ $0 > $1 }
```


## ê°’ íšë“ (Capture)
 í´ë¡œì €ì—ì„œ ê°€ì¥ ëˆˆì— ë„ëŠ” ê¸°ëŠ¥ì´ë‹¤.  

í´ë¡œì €ëŠ” ìì‹ ì´ ì •ì˜ëœ ìœ„ì¹˜ì˜ ì£¼ë³€ ë¬¸ë§¥ì„ í†µí•´ ìƒìˆ˜ë‚˜ ë³€ìˆ˜ë¥¼ **íšë“(Capture)**í•  ìˆ˜ ìˆë‹¤. ì •ì˜í• ë•Œ ì£¼ë³€ì— ì¡´ì¬í•˜ì˜€ë˜ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ê°€ ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•Šë”ë¼ë„ í´ë¡œì €ëŠ” ê·¸ ìƒìˆ˜ë‚˜ ë³€ìˆ˜ì˜ ê°’ì„ ìì‹  ë‚´ë¶€ì—ì„œ ì°¸ì¡°í•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.  
ë§ˆì¹˜ í´ë¡œì €ê°€ ìì‹ ì˜ í”„ë¡œí¼í‹°ë¡œ ì €ì¥í•´ ê°„ ê²ƒ ê°™ë‹¤. (ëˆˆì— ë³´ì´ì§€ëŠ” ì•Šì§€ë§Œ)

> í´ë¡œì €ëŠ” ë¹„ë™ê¸° ì‘ì—…ì— ë§ì´ ì‚¬ìš©ëœë‹¤. í´ë¡œì €ë¥¼ í†µí•´ ë¹„ë™ê¸° ì½œë°±ì˜ í˜•íƒœë¥¼ ì‘ì„±í•˜ëŠ” ê²½ìš°, í˜„ì¬ ìƒíƒœë¥¼ ë¯¸ë¦¬ íšë“í•´ë‘ì§€ ì•Šìœ¼ë©´, ì‹¤ì§ˆì ìœ¼ë¡œ í´ë¡œì €ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ìˆœê°„ì—ëŠ” ì£¼ë³€ì˜ ìƒìˆ˜ë‚˜ ë³€ìˆ˜ê°€ ì´ë¯¸ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.

ì¤‘ì²©í•¨ìˆ˜ë„ í´ë¡œì €ì˜ í˜•íƒœì´ë¯€ë¡œ ìì‹ ì„ í¬í•¨í•˜ê³  ìˆëŠ” ì§€ì—­ë³€ìˆ˜ë‚˜ ì§€ì—­ìƒìˆ˜ë¥¼ íšë“í•  ìˆ˜ ìˆë‹¤. ë¨¼ì € ì¤‘ì²©í•¨ìˆ˜ì—ì„œ ê°’ íšë“ì„ ëŠê»´ë³´ì.

```swift
func makeIncrementer(forIncrement amount: Int) -> (() -> Int) {
    var Total = 0

    func incrementer() -> Int {

        Total += amount
        return Total
    }

    return incrementer 
    
}
```

`incrementer()`í•¨ìˆ˜ë¥¼ ì£¼ëª©í•˜ì. ì´ ë…€ì„ì€ ì£¼ë³€ì— ìˆëŠ” `runnningTotal`ê³¼ `amount`ë¼ëŠ” ë‘ ê°’ì„ íšë“í•œë‹¤.

ì´ì œ `incrementer()`í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ë†€ì•„ë³´ì

```swift
// Totalì— amountë¥¼ ë”í•´ì„œ Totalì„ return

let incrementerByTwo: (()-> Int) = makeIncrementer(forIncrement: 2)

incrementerByTwo()  // 2
incrementerByTwo()  // 4
incrementerByTwo()  // 6

let incrementerByTen = makeIncrementer(forIncrement: 10)

incrementerByTen()  // 10
incrementerByTen()  // 20
incrementerByTen()  // 30
```

`incrementer()`í•¨ìˆ˜ê°€ ì •ì˜ëœ ê³³ì„ ë²—ì–´ë‚¬ì–´ë„  
í´ë¡œì €ê°€ í• ë‹¹ëœ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ê°€ Total ê°’ê³¼ amountê°’ì„ ê¸°ì–µí•˜ê³  ìˆë‹¤.  

(í•˜ì§€ë§Œ ì´ ë¶€ë¶„ì´ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„ë˜ì§€ ì•Šì•„ì„œ ì•„ì‰½ë‹¤. ë¬´ìŠ¨ê°’ì„ íšë“í•˜ê³  ìˆëŠ”ì§€..ë“±ë“±)


## í´ë¡œì €ëŠ” ì°¸ì¡°íƒ€ì…

ê·¸ëŸ¬í•˜ë‹¤. **ì œê³§ë‚´**  
ë‹¤ë¥¸ ìƒìˆ˜ë‚˜ ë³€ìˆ˜ì— í´ë¡œì €ë¥¼ ëŒ€ì…í•˜ë©´ ê°™ì€ ì°¸ì¡°ë¥¼ í• ë‹¹í•˜ê²Œ ëœë‹¤. ìœ„ì˜ ì˜ˆì œë¥¼ ê³„ì† í•´ì„œ ì‚¬ìš©í•´ë³´ì.

```swift
let c1: (() -> Int) = makeIncrementer(forIncrement: 5)

let c2 = c1  // c2 = c1() ì´ë ‡ê²Œ ì“°ë©´ ì•ˆë¨

c1()    // 5
c2()    // 10
```
ê°™ì€ Totalì— amoutë¥¼ ë”í•˜ê³  ìˆë‹¤.

ì´ë²ˆì—” í´ë˜ìŠ¤ì— í´ë¡œì €ê°€ ì •ì˜ë˜ì–´ ìˆëŠ” ê²½ìš°ë¥¼ ì•Œì•„ë³´ì.

## íšë“ëª©ë¡
ë¨¼ì € í´ë¡œì €ì˜ *íšë“ëª©ë¡*ì„ ì•Œì•„ì•¼í•œë‹¤.  
íšë“ëª©ë¡ì€ í´ë¡œì € ë‚´ë¶€ì—ì„œ ì°¸ì¡°íƒ€ì…ì„ íšë“í•˜ëŠ” ê·œì¹™ì„ ì œì‹œí•´ ì¤„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.

```swift
var a = 0
var b = 0

let closure : (() -> ()) = { [a] in
    // let a = a
    b = 20
    print(a, b)
}
a = 10
b = 10

closure()   // 0 20
```
íšë“ëª©ë¡ì€ `[ ]`ëŒ€ê´„í˜¸ ì•ˆì— ì ì–´ì£¼ê³  ê·¸ ë‹¤ìŒ in í‚¤ì›Œë“œë¥¼ ì ì–´ì¤€ë‹¤. ì €ë ‡ê²Œ ì ì–´ì£¼ë©´ let a = aë¼ê³  ì„ ì–¸í•œ ê²ƒì²˜ëŸ¼ ë°”ê¹¥í™˜ê²½ê³¼ ë³„ê°œë¡œ `a`ë³€ìˆ˜ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

#### ì°¸ì¡°íƒ€ì…ì˜ íšë“ëª©ë¡

ì´ë²ˆì—ëŠ” íšë“ëª©ë¡ì— ì°¸ì¡° íƒ€ì…ì„ ë„£ì–´ë³´ì. ì•½ê°„ ë‹¤ë¥´ë‹¤.
```swift
class SimpleClass{
    var value: Int = 0
}

var x = SimpleClass()
var y = SimpleClass()

let closure = { [x] in
    print(x.value, y.value)
}
x.value = 10
y.value = 10

closure()   // 10 10
```
íšë“ëª©ë¡ì˜ ë™ì‘ì€ ê°™ì§€ë§Œ `x`ëŠ” ì°¸ì¡°íƒ€ì…ì´ë¯€ë¡œ x.valueê°€ ë°”ë€ ê²ƒì— ì˜í–¥ì„ ë°›ëŠ”ë‹¤.

#### í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹°ë¡œì„œì˜ í´ë¡œì €

```swift
class SomeClass {
    var name: String = "old"

    lazy var someClosure: () -> String = {
        () in
    self.name = "new"

        return self.name
    }

    deinit {
        print("deinit!")
    }

}

var a : SomeClass? = SomeClass()
a?.someClosure()     // Optional("new")
a = nil
```

ë´ì•¼í•  ê²ƒì´ 3ê°œ ìˆë‹¤.  
ì²« ë²ˆì§¸ëŠ” `lazy var` í‚¤ì›Œë“œ. í´ë˜ìŠ¤ ì•ˆì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë ¤ë©´ `lazy var`í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ì•¼í•œë‹¤. ë§Œì•½ `let`í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ íƒ€ì… ì•ˆì˜ ë‹¤ë¥¸ í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì§€ ëª»í•œë‹¤. í´ë¡œì €ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì´ ì¼ë°˜ í•¨ìˆ˜ë‚˜ í”„ë¡œí¼í‹°ì™€ëŠ” ë‹¤ë¥¸ê²ƒ ê°™ë‹¤.
ë‘ ë²ˆì§¸ëŠ” `self`í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ íƒ€ì… ë‚´ë¶€ìì›ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ëŠ” ì .
ì„¸ ë²ˆì§¸ëŠ” ë§ˆì§€ë§‰ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•´ì œí–ˆëŠ”ë°ë„ ë©”ëª¨ë¦¬ê°€ í•´ì œ ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì .  
   
ì„¸ë²ˆì§¸ê°€ ë°”ë¡œ *ê°•í•œ ì°¸ì¡° ìˆœí™˜*ë¬¸ì œ ë•Œë¬¸ì´ë‹¤. ì±…ì˜ 457ìª½(ARC)ë¥¼ ì°¸ê³ í•˜ì.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í´ë¡œì €ë¥¼ ì„ ì–¸í•  ë–„  
`[weak self]` ë˜ëŠ” `[unowned self]` íšë“ëª©ë¡ì„ ì‚¬ìš©í•œë‹¤.

```swift
lazy var someClosure: () -> String = {
    [weak self] in
    self?.name = "new"
    return self!.name
}
```
`[weak self]`ëŠ” ìƒìˆ˜ë¥¼ ì˜µì…”ë„ íƒ€ì…ìœ¼ë¡œ ë°›ëŠ”ë‹¤ëŠ” ëœ»ì´ë‹¤. ë”°ë¼ì„œ ê·¸ ìƒìˆ˜(ì—¬ê¸°ì„  self)ê°€ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œë  ê²½ìš° nilì„ ë°˜í™˜í•œë‹¤.  
`[unowned self]`ëŠ” ìƒìˆ˜(ì—¬ê¸°ì„  self)ê°€ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œë˜ë©´ ëŸ°íƒ€ì„ì—ëŸ¬!! 

## íƒˆì¶œ í´ë¡œì € (Escape)

**í•¨ìˆ˜ì˜ ì „ë‹¬ì¸ìë¡œ ì „ë‹¬ëœ í´ë¡œì €ê°€ í•¨ìˆ˜ ì¢…ë£Œ í›„ì— í˜¸ì¶œë  ë•Œ** í´ë¡œì €ê°€ í•¨ìˆ˜ë¥¼ **íƒˆì¶œ(escaping)**í•œë‹¤ê³  í‘œí˜„í•œë‹¤. í´ë¡œì €ê°€ í•¨ìˆ˜ë¥¼ íƒˆì¶œí• ìˆ˜ ìˆëŠ” ê²½ìš°ì¤‘ í•˜ë‚˜ëŠ” í•¨ìˆ˜ ì™¸ë¶€ì— ì •ì˜ëœ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ì— ì €ì¥ë˜ì–´ í•¨ìˆ˜ê°€ ì¢…ë£Œëœ í›„ì— ì‚¬ìš©, ì €ì¥ë  ê²½ìš°ì´ë‹¤.

ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì˜ (:) ë’¤ì— `@escaping` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì¤€ë‹¤. (ê¸°ë³¸ì ìœ¼ë¡  `@nonescaping`ì´ ë¶™ì–´ìˆëŠ” ë¹„íƒˆì¶œ í´ë¡œì €)

> ì˜ˆë¥¼ ë“¤ì–´ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ë“¤ì´ í´ë¡œì €ë¥¼ ì»´í”Œë¦¬ì…˜ í•¸ë“¤ëŸ¬(Completion handler)ì „ë‹¬ì¸ìë¡œ ë°›ì•„ì˜¨ë‹¤. ë¹„ë™ê¸° ì¡ì—…ìœ¼ë¡œ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ê³  ë‚œ í›„ ì‘ì—…ì´ ëë‚˜ê³  í˜¸ì¶œë  í•„ìš”ê°€ ìˆëŠ” í´ë¡œì €ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ íƒˆì¶œ í´ë¡œì €ê°€ í•„ìš”í•˜ë‹¤.

ì•„ì°¸ ê·¸ë¦¬ê³  íƒˆì¶œí´ë¡œì €ëŠ” ë‚´ë¶€ì—ì„œ íƒ€ì… ìì›ì— ì ‘ê·¼í•  ë•Œ `self`í‚¤ì›Œë“¤ ê¼­ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•œë‹¤.

ì˜ˆ)
```swift
var Handlers: [() -> Void] = []

func someFunction(Handler: @escaping ()-> Void) {
    Handlers.append(Handler)
}
// @escaping ì´ ì—†ìœ¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬!
```


## Auto Closure

í•¨ìˆ˜ì˜ ì „ë‹¬ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” í‘œí˜„ì„ ìë™ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” í´ë¡œì €.  
ìë™ í´ë¡œì €ëŠ” ì „ë‹¬ì¸ìë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤.  
ìë™í´ë¡œì €ëŠ” í˜¸ì¶œë˜ì—ˆì„ ë•Œ ìì‹ ì´ ê°ì‹¸ê³  ìˆëŠ” ì½”ë“œì˜ ê²°ê³¼ê°’ì„ ë°˜í™˜.  
ë¬¸ë²•ì ‘ í¸ì˜ ì œê³µ  

 í ... ì¢€ ë‚œí•´í•˜ë‹¤....ì™œ ìˆëŠ”ì§€ ì•„ì§ ì˜ ëª¨ë¥´ê² ìŒã…œã…  ë©˜ë¶•ì„. ë‹¤í–‰ì¸ê±´ ë³„ë¡œ ì“¸ì¼ ì—†ì„ê±°ë˜ã…‹,ã…‹


í•¨ìˆ˜ê°€ ** ì „ë‹¬ì¸ìê°€ ì—†ëŠ” í´ë¡œì €** ë¥¼ ì „ë‹¬ì¸ìë¡œ ë°›ëŠ”ë‹¤.  
ê·¸ë˜ì„œ ì•„ê¹Œë¶€í„° ì‚¬ìš©í–ˆë˜ `names.sroted(by:)` ì˜ˆì œë¥¼ ì“¸ìˆ˜ ì—†ë‹¤.

~~í´ë¡œì €ë¥¼ í†µí•´ ì§€ì—° ì—°ì‚°ì„ í•´ì•¼í•œë‹¤..?~~
~~í´ë¡œì €ì˜ ê¸°ëŠ¥ì¸ ê°’ íšë“ì€ ì“¸ìˆ˜ ì—†ì„ë“¯..?~~


```swift

var customerInLine: [String] = ["YongWha", "SangYong","SungHun", "Hami"]


func serveCustomer ( _ customerProvider:  () -> String ) {
    print("Now serving \(customerProvider())")
}
serveCustomer( { customerInLine.removeFirst() } ) // í•˜ë‚˜ ì§€ì›Œì§


////////////// ì•„ë˜ëŠ” autoClosure ì ìš© /////// 

func autoClosureServeCustomer ( _ customerProvider: @autoclosure () -> String ) {
    print("Now serving \(customerProvider())")
}
autoClosureServeCustomer(  customerInLine.removeFirst()  ) // í•˜ë‚˜ ì§€ì›Œì§

```

ì±…ì— ìˆëŠ” ë‚´ìš©
> ìë™ í´ë¡œì € ì†ì„±ì„ ë¶€ì—¬í•œ ë§¤ê°œë³€ìˆ˜ëŠ” í´ë¡œì € ëŒ€ì‹ ì— customerInLine.removeFirst() ì½”ë“œì˜ ì‹¤í–‰ê²°ê³¼ì¸ String íƒ€ì…ì˜ ë¬¸ìì—´ì„ ì „ë‹¬ì¸ìë¡œ ë°›ê²Œ ë©ë‹ˆë‹¤. String íƒ€ì…ì˜ ê°’ì´ ìë™ í´ë¡œì € ë§¤ê°œë³€ìˆ˜ì— ì „ë‹¬ë˜ë©´ String ê°’ì„ ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” Stringê°’ì„ ë°˜í™˜í•œëŠ” í´ë¡œì €ë¡œ ë³€í™˜í•´ ì¤ë‹ˆë‹¤. String íƒ€ì…ì˜ ê°’ì„ ì „ë‹¬ ë°›ëŠ” ì´ìœ ëŠ” ìë™ í´ë¡œì €ì˜ ë°˜í™˜ íƒ€ì…ì´ Stringì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ìë™í´ë¡œì €ëŠ” ì „ë‹¬ì¸ìë¥¼ ê°–ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°˜í™˜ íƒ€ì…ì˜ ê°’ì´ ìë™ í´ë¡œì €ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë˜ë©´ ì´ë¥¼ í´ë¡œì €ë¡œ ë°”ê¿”ì¤„ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.

**ìë™í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì˜ ì‚¬ìš© ë°©ë²•ì²˜ëŸ¼ í´ë¡œì €ë¥¼ ì „ë‹¬ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ í•©ë‹ˆë‹¤.**  
ì—¬ê¸°ì„œ ë”ë”ìš± í˜¼ë€ì„ã…‹ã…‹ã…‹ã…‹ í•¨ìˆ˜ê°’ ì „ë‹¬í•˜ë“¯ì´ ì“°ë¼ëŠ” ë§ì¸ë°..

~~í´ë¡œì €ë¥¼ ì „ë‹¬í•˜ë„ë¡ êµ¬í˜„ëœ í•¨ìˆ˜ì— í•¨ìˆ˜ê²°ê³¼ê°’ì„ ë°”ë¡œ ë„˜ê²¨ì£¼ë„ë¡ ë³€í™”í•´ì£¼ëŠ” ê¸°ëŠ¥?~~ 

ë‹¤ì‹œí•œë²ˆ ì‚´í´ë³´ì.
```swift

var customerInLine: [String] = ["YongWha", "SangYong","SungHun", "Hami"]
 
func autoClosureServeCustomer ( _ customerProvider: @autoclosure () -> String ) {
    print("Now serving \(customerProvider())")
}

autoClosureServeCustomer(  customerInLine.removeFirst()  ) // í•˜ë‚˜ ì§€ì›Œì§

// ì´ëŸ° ëª¨ì–‘ì˜ í´ë¡œì €ë¡œ ì „ë‹¬ë˜ì–´ì„œ autoClosureServeCustomer í•¨ìˆ˜ë¡œ ê°€ëŠ”ë“¯ í•˜ë‹¤. 
let _ : () -> String = {
    return customerInLine.removeFirst()
}
```

## Closureì˜ í™œìš©

í´ë¡œì €ëŠ” sort(), filter(), map(), reduce() ë“±ì˜ ë©”ì„œë“œì™€ í•¨ê»˜ ë§ì´ ì“°ì¸ë‹¤.
 












